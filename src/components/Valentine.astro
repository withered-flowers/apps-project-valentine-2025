---
import "@/styles/globals.css";
---

<html lang="en" class="bg-primary">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width" />
    <title>Valentine's Mail</title>
    <style>
      .envelope-container {
        perspective: 1000px;
      }

      .envelope {
        width: 300px;
        height: 200px;
        position: relative;
        cursor: pointer;
        background: #fce7f3;
        border-radius: 8px;
        box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
      }

      .flap {
        position: absolute;
        width: 100%;
        height: 100px;
        top: 0;
        left: 0;
        background: #fbcfe8;
        clip-path: polygon(0 0, 50% 50%, 100% 0);
        transform-origin: top;
        transition: transform 0.6s cubic-bezier(0.4, 0, 0.2, 1);
        z-index: 2;
      }

      .envelope.open .flap {
        transform: rotateX(180deg);
      }

      .letter {
        position: relative;
        width: 24em;
        min-height: 8em;
        padding: 20px;
        background: #fff5f7;
        border-radius: 8px;
        box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%) translateY(20px);
        opacity: 0;
        transition: all 0.6s ease;
        z-index: 999;
      }

      .envelope.open .letter {
        transform: translate(-50%, -50%) translateY(0);
        opacity: 1;
      }

      @keyframes float {
        0%,
        100% {
          transform: translateY(0);
        }
        50% {
          transform: translateY(-10px);
        }
      }

      .floating {
        animation: float 3s ease-in-out infinite;
      }

      .response {
        position: fixed;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        background: rgba(252, 231, 243, 0.95);
        padding: 2rem;
        border-radius: 1rem;
        box-shadow: 0 10px 25px rgba(0, 0, 0, 0.1);
        z-index: 50;
        opacity: 0;
        pointer-events: none;
        transition: opacity 0.3s ease;
      }

      .response.show {
        opacity: 1;
        pointer-events: auto;
      }
    </style>
  </head>
  <body class="min-h-screen flex items-center justify-center">
    <div class="text-center">
      <div class="envelope-container flex items-center justify-center">
        <div class="envelope floating" id="envelope">
          <div class="flap"></div>
          <div class="letter" id="letter">
            <h2 class="text-2xl font-bold text-pink-600 mb-4">‚ù§Ô∏è Be Mine ‚ù§Ô∏è</h2>
            <p class="text-pink-500 mb-4">Will you be my Valentine?</p>
            <div class="flex justify-center space-x-4">
              <button
                id="yesBtn"
                class="px-6 py-2 bg-pink-400 text-white rounded-full hover:bg-pink-500 transition-colors"
              >
                Yes
              </button>
              <button
                id="maybeBtn"
                class="px-6 py-2 bg-pink-200 text-pink-600 rounded-full hover:bg-pink-300 transition-colors"
              >
                Maybe
              </button>
            </div>
          </div>
        </div>
      </div>
      <p id="clickPrompt" class="mt-6 text-pink-400 animate-pulse">Click to open ‚ú®</p>
      <p class="mt-6 text-secondary-accent">
        ~ this answer will be recorded and showed to the sender, please answer it honestly ~
      </p>

      <div id="yesResponse" class="response">
        <h3 class="text-2xl font-bold text-pink-600 mb-4">üéâ Yay! üéâ</h3>
        <p class="text-pink-500">You've made me the happiest person ever! ‚ù§Ô∏è</p>
      </div>

      <div id="maybeResponse" class="response">
        <h3 class="text-2xl font-bold text-pink-600 mb-4">ü§î Take your time...</h3>
        <p class="text-pink-500">No pressure! I'll be here when you're ready üíù</p>
      </div>

      <script>
        import confetti from "canvas-confetti";

        const envelope = document.getElementById("envelope");
        const clickPrompt = document.getElementById("clickPrompt");
        const yesBtn = document.getElementById("yesBtn");
        const maybeBtn = document.getElementById("maybeBtn");
        const yesResponse = document.getElementById("yesResponse");
        const maybeResponse = document.getElementById("maybeResponse");

        let isOpen = false;

        envelope?.addEventListener("click", () => {
          isOpen = !isOpen;

          if (isOpen) {
            envelope.classList.add("open");
            clickPrompt?.classList.add("hidden");
          } else {
            envelope.classList.remove("open");
            clickPrompt?.classList.remove("hidden");
          }
        });

        yesBtn?.addEventListener("click", () => {
          confetti({
            particleCount: 100,
            spread: 70,
            origin: { y: 0.6 },
          });
          yesResponse?.classList.add("show");
          setTimeout(() => {
            yesResponse?.classList.remove("show");
          }, 3000);
        });

        maybeBtn?.addEventListener("click", () => {
          maybeResponse?.classList.add("show");
          setTimeout(() => {
            maybeResponse?.classList.remove("show");
          }, 3000);
        });
      </script>
    </div>
  </body>
</html>
