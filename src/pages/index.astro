---
import SlotCentered from "@/components/SlotCentered.astro";
import Layout from "@/layouts/Layout.astro";
import LottieAnimation from "astro-integration-lottie/Lottie.astro";
---

<script>
  import { actions } from "astro:actions";

  const form = document.querySelector("form");

  form?.addEventListener("submit", async (e) => {
    e.preventDefault();

    const formData = new FormData(form);
    const { data, error } = await actions.formHandler(formData);

    console.log("Data", data);
    console.log("Error", error);

    const response = document.getElementById("response");

    response ? response.innerHTML = `
      <p class="font-secondary text-lg text-primary-accent text-center">
        ${data ? `Form submitted successfully: ${data.message}` : "Form submission failed"}
      </p>
    `: null;
  });
</script>

<Layout title="Hello Valentine">
  <SlotCentered>
    <!-- Header  -->
    <div class="flex flex-row gap-4 items-center px-8 md:px-0">
      <LottieAnimation class="w-8 h-8 mx-auto" src="assets/lotties/heart.json" autoplay="visible" />
      <h1 class="font-secondary text-3xl text-primary-accent text-center">
        Welcome to Project Valentine
      </h1>
      <LottieAnimation class="w-8 h-8 mx-auto" src="assets/lotties/heart.json" autoplay="visible" />
    </div>
    <!-- Content -->
    <div>
      <p class="font-secondary text-lg text-primary-accent text-center">
        A website to show your love for your significant other
      </p>
      <form method="post">
        <button
          type="submit"
          class="py-1 px-2 rounded mx-auto bg-secondary-accent hover:bg-secondary text-white hover:text-secondary-accent font-secondary transition-colors duration-300"
          >Submit
        </button>
      </form>
      <div id="response"></div>
    </div>
  </SlotCentered>
</Layout>
